{% extends 'base.html' %}
{% load static %}

{% block includes %}
<link rel="stylesheet" href="{% static 'css/book.css' %}" />
<script src="{% static 'js/filter.js' %}"></script>
{% endblock %}

{% block content %}
<div class="row align-items-center">
    <!-- Campo de pesquisa -->
    <div class="col-md-8">
        <div class="input-group">
            <input onkeydown="SearchFilter(event);" type="text" id="searchValue" class="form-control" placeholder="Buscar..." aria-label="Buscar">
            <button onclick="SearchFilter();" class="btn btn-outline-secondary" type="button">
                <img src="{% static 'images/icons/search.svg' %}" width="16" alt="Ícone de pesquisa">
            </button>
        </div>
    </div>

    <!-- Dropdown de categorias -->
    <div class="col-md-2">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                Categorias
            </button>
            <ul class="dropdown-menu">
               {% for category in categories %}
                    <li><button class="dropdown-item" onclick="AddParams('category', '{{ category.name }}')" >{{ category.name }}</button></li>
               {% endfor %}
            </ul>
        </div>
    </div>
</div>

<br>

<!-- Filtro por letra -->
<div class="row align-items-center">
    {% for letter in letter_filter %}
        <button onclick="AddParams('letter', '{{ letter }}')" class="letter-button" style="width: 20px;">{{ letter }}</button>
    {% endfor %}
</div>

<!-- Filtros aplicados -->
{% if filters_used %}
<br>
<div>
    {% for filter in filters_used %}
        <button onclick="RemoveFilter('{{ filter.name }}');" style="border: none;">
            <div class="card d-inline-block w-auto badge text-bg-danger" style="margin-bottom: 0px;">
                <h5 class="card-header" style="padding: 5px;"> <i class="ti ti-trash"></i></h5>
                <div class="card-body" style="padding: 0px; padding-bottom: 10px;">
                    {{ filter.value }}
                </div>
            </div>
        </button>
    {% endfor %}
</div>
{% endif %}

<hr>

<!-- Lista de livros -->
{% include 'components/books_list.html' with books=books.object_list %}

<!-- Paginação -->
<nav aria-label="Page navigation">
    <ul class="pagination">
        {% if books.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page=1" aria-label="First">&laquo;&laquo;</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ books.previous_page_number }}" aria-label="Previous">&laquo;</a>
            </li>
        {% endif %}

        {% for num in books.paginator.page_range %}
            <li class="page-item {% if books.number == num %}active{% endif %}">
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
            </li>
        {% endfor %}

        {% if books.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ books.next_page_number }}" aria-label="Next">&raquo;</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ books.paginator.num_pages }}" aria-label="Last">&raquo;&raquo;</a>
            </li>
        {% endif %}
    </ul>
</nav>

{% endblock %}
